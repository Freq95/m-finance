@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme — bright, clean with frosted glass */
    --background: 250, 250, 252;
    --background-deep: 242, 242, 247;
    --foreground: 28, 28, 30;
    --foreground-secondary: 60, 60, 67;
    --foreground-tertiary: 142, 142, 147;
    --glass-bg: 255, 255, 255;
    --glass-border: 255, 255, 255;
    --glass-opacity: 0.72;
    --glass-border-opacity: 0.18;
    --glass-blur: 40px;
    --surface-elevated: 255, 255, 255;
    --surface-elevated-opacity: 0.85;
    --overlay-dim: 0, 0, 0;
    --overlay-opacity: 0.4;
    --overlay-blur: 20px;
    --radius-sm: 12px;
    --radius-md: 16px;
    --radius-lg: 20px;
    --radius-xl: 24px;
    --radius-2xl: 28px;
    --shadow-soft: 0 2px 8px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.06);
    --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04);
    --shadow-modal: 0 24px 48px rgba(0, 0, 0, 0.12), 0 8px 16px rgba(0, 0, 0, 0.06);
    --ease-liquid: cubic-bezier(0.33, 1, 0.68, 1);
    --ease-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
    --duration-fast: 200ms;
    --duration-normal: 320ms;
    --duration-slow: 480ms;
  }

  .dark {
    /* Dark theme — deep black with glassy panels; high-contrast text */
    --background: 0, 0, 0;
    --background-deep: 8, 8, 10;
    --foreground: 255, 255, 255;
    --foreground-secondary: 230, 230, 235;
    --foreground-tertiary: 190, 190, 198;
    --glass-bg: 30, 30, 34;
    --glass-border: 255, 255, 255;
    --glass-opacity: 0.55;
    --glass-border-opacity: 0.14;
    --glass-blur: 40px;
    --surface-elevated: 44, 44, 46;
    --surface-elevated-opacity: 0.6;
    --overlay-dim: 0, 0, 0;
    --overlay-opacity: 0.6;
    --overlay-blur: 24px;
    --shadow-soft: 0 2px 12px rgba(0, 0, 0, 0.3), 0 1px 3px rgba(0, 0, 0, 0.2);
    --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
    --shadow-modal: 0 24px 48px rgba(0, 0, 0, 0.5), 0 8px 16px rgba(0, 0, 0, 0.3);
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply antialiased;
    font-family: var(--font-poppins), "Poppins", sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
    background-color: rgb(var(--background));
    color: rgb(var(--foreground));
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

@layer components {
  /* Liquid glass panel — primary surface (individual cards, etc.) */
  .glass-panel {
    background: rgba(var(--glass-bg), var(--glass-opacity));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid rgba(var(--glass-border), var(--glass-border-opacity));
    box-shadow: var(--shadow-soft);
  }

  /* Parent / wrapper panel — outer container that wraps e.g. the six metric cards; more transparent than .glass-panel */
  .glass-panel-wrap {
    background: rgba(var(--glass-bg), 0.38);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid rgba(var(--glass-border), var(--glass-border-opacity));
    box-shadow: var(--shadow-soft);
  }

  /* Glass tooltip — more transparent so content behind shows through */
  .glass-tooltip {
    background: rgba(var(--glass-bg), 0.28);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid rgba(var(--glass-border), var(--glass-border-opacity));
    box-shadow: var(--shadow-soft);
  }

  /* Tooltip: fully transparent background, blur behind */
  .glass-tooltip-blur {
    background: transparent !important;
    backdrop-filter: blur(7px);
    -webkit-backdrop-filter: blur(7px);
    border: 1px solid rgba(var(--glass-border), var(--glass-border-opacity));
    box-shadow: none;
  }

  /* Glass surface — compact controls (toggles, badges, icon wrappers, inputs) */
  .glass-surface {
    background: rgba(var(--glass-bg), 0.5);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(var(--glass-border), var(--glass-border-opacity));
  }

  /* Dark glass panel — sidebar / always-dark surfaces */
  .glass-panel-dark {
    background: rgba(30, 30, 34, 0.75);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow-soft);
  }

  .glass-panel-elevated {
    background: rgba(var(--surface-elevated), var(--surface-elevated-opacity));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid rgba(var(--glass-border), var(--glass-border-opacity));
    box-shadow: var(--shadow-glass);
  }

  /* Chart tooltips (Dashboard) — same style as Salvat: transparent + 7px blur */
  .chart-tooltip {
    margin: 0;
    padding: 12px 16px;
    border-radius: 16px;
    background: transparent !important;
    backdrop-filter: blur(7px);
    -webkit-backdrop-filter: blur(7px);
    border: 1px solid rgba(var(--glass-border), var(--glass-border-opacity));
    box-shadow: none;
    color: rgb(255, 255, 255);
    font-size: 13px;
    min-width: 140px;
  }
  .chart-tooltip-label {
    color: rgba(255, 255, 255, 0.8);
    font-size: 12px;
    margin-bottom: 6px;
  }
  .chart-tooltip-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
    font-size: 13px;
  }

  /* Recharts tooltip wrappers — same as Salvat: transparent + 7px blur (no slice tint) */
  .recharts-tooltip-wrapper,
  .recharts-default-tooltip {
    background: transparent !important;
    backdrop-filter: blur(7px);
    -webkit-backdrop-filter: blur(7px);
    border: 1px solid rgba(var(--glass-border), var(--glass-border-opacity)) !important;
    box-shadow: none !important;
    padding: 12px 16px;
    border-radius: 16px;
  }

  /* Bar chart hover cursor — subtle highlight instead of default grey block */
  .chart-bar-cursor {
    fill: rgba(255, 255, 255, 0.06);
    stroke: rgba(255, 255, 255, 0.14);
    stroke-width: 1;
    rx: 6;
    ry: 6;
    transition: fill 0.2s ease, stroke 0.2s ease;
  }

  /* Modal overlay — blur + dim */
  .glass-overlay {
    background: rgba(var(--overlay-dim), var(--overlay-opacity));
    backdrop-filter: blur(var(--overlay-blur));
    -webkit-backdrop-filter: blur(var(--overlay-blur));
  }
}

@layer utilities {
  .glass {
    background: rgba(var(--glass-bg), var(--glass-opacity));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
  }
  .glass-dark {
    background: rgba(var(--glass-bg), var(--glass-opacity));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
  }

  /* Liquid enter/exit for modals */
  .animate-in-glass {
    animation: glass-in var(--duration-normal) var(--ease-liquid) forwards;
  }
  .animate-out-glass {
    animation: glass-out var(--duration-fast) var(--ease-liquid) forwards;
  }
  .animate-overlay-in {
    animation: overlay-in var(--duration-normal) var(--ease-liquid) forwards;
  }
  .animate-overlay-out {
    animation: overlay-out var(--duration-fast) var(--ease-liquid) forwards;
  }
}

@keyframes glass-in {
  from {
    opacity: 0;
    transform: scale(0.96) translateY(8px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes glass-out {
  from {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  to {
    opacity: 0;
    transform: scale(0.98) translateY(4px);
  }
}

@keyframes overlay-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes overlay-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* Bell ring — continuous subtle swing when there are due notifications */
@keyframes bell-ring {
  0%,
  100% {
    transform: rotate(0deg);
  }
  12% {
    transform: rotate(14deg);
  }
  28% {
    transform: rotate(-10deg);
  }
  44% {
    transform: rotate(8deg);
  }
  60% {
    transform: rotate(-4deg);
  }
  76% {
    transform: rotate(2deg);
  }
}

.animate-bell-ring {
  animation: bell-ring 1.6s ease-in-out infinite;
  transform-origin: top center;
}

/* TV-style close for due payments list items */
@keyframes tv-item-off {
  to {
    opacity: 0;
    transform: scaleY(0);
  }
}

.due-payments-modal-closing li {
  transform-origin: center;
  animation: tv-item-off 0.28s ease-in forwards;
}
